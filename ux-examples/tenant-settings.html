<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tenant Settings - REAN Admin Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .settings-overview {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .overview-card {
      background: var(--color-bg-primary);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .overview-card-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .overview-card-icon.primary { background: var(--color-primary-100); color: var(--color-primary-600); }
    .overview-card-icon.success { background: var(--color-success-50); color: var(--color-success-600); }
    .overview-card-icon.warning { background: var(--color-warning-50); color: var(--color-warning-600); }
    
    .overview-card-content h4 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .overview-card-content p {
      font-size: 0.875rem;
      color: var(--color-text-muted);
    }
    
    .settings-tabs {
      display: flex;
      gap: 0.5rem;
      border-bottom: 1px solid var(--color-border);
      margin-bottom: 1.5rem;
      overflow-x: auto;
      padding-bottom: 0;
    }
    
    .settings-tab {
      padding: 0.875rem 1.5rem;
      font-size: 0.9375rem;
      font-weight: 500;
      color: var(--color-text-muted);
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: all var(--transition-fast);
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .settings-tab:hover {
      color: var(--color-text-primary);
    }
    
    .settings-tab.active {
      color: var(--color-primary-600);
      border-bottom-color: var(--color-primary-600);
    }
    
    .settings-tab svg {
      width: 18px;
      height: 18px;
    }
    
    .interface-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .interface-card {
      background: var(--color-bg-primary);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      transition: all var(--transition-fast);
    }
    
    .interface-card:hover {
      border-color: var(--color-primary-400);
    }
    
    .interface-card.enabled {
      border-color: var(--color-success-500);
      background: linear-gradient(135deg, var(--color-success-50) 0%, var(--color-bg-primary) 100%);
    }
    
    .interface-card-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .interface-card-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--color-bg-tertiary);
      color: var(--color-text-secondary);
    }
    
    .interface-card.enabled .interface-card-icon {
      background: var(--color-success-50);
      color: var(--color-success-600);
    }
    
    .interface-card h3 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .interface-card p {
      font-size: 0.875rem;
      color: var(--color-text-muted);
      margin-bottom: 1rem;
    }
    
    .interface-card-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .setup-progress {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8125rem;
    }
    
    .setup-progress.complete {
      color: var(--color-success-600);
    }
    
    .setup-progress.incomplete {
      color: var(--color-warning-600);
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar"></aside>
    
    <!-- Main Content -->
    <main class="main-content">
      <!-- Navbar -->
      <header class="navbar" id="navbar"></header>
      
      <!-- Page Content -->
      <div class="page-container">
        <!-- Header -->
        <div class="page-header" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h1 class="page-title">Tenant Settings</h1>
            <p class="page-subtitle">Configure settings for REAN Health tenant</p>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <button class="btn btn-secondary">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              Export Settings
            </button>
            <button class="btn btn-primary" onclick="saveAllSettings()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
              </svg>
              Save All Changes
            </button>
          </div>
        </div>
        
        <!-- Overview Cards -->
        <div class="settings-overview">
          <div class="overview-card">
            <div class="overview-card-icon primary">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <line x1="3" y1="9" x2="21" y2="9"/>
                <line x1="9" y1="21" x2="9" y2="9"/>
              </svg>
            </div>
            <div class="overview-card-content">
              <h4>5</h4>
              <p>Active Interfaces</p>
            </div>
          </div>
          
          <div class="overview-card">
            <div class="overview-card-icon success">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 11 12 14 22 4"/>
                <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
              </svg>
            </div>
            <div class="overview-card-content">
              <h4>68%</h4>
              <p>Setup Complete</p>
            </div>
          </div>
          
          <div class="overview-card">
            <div class="overview-card-icon warning">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
              </svg>
            </div>
            <div class="overview-card-content">
              <h4>3</h4>
              <p>Pending Configurations</p>
            </div>
          </div>
        </div>
        
        <!-- Settings Tabs -->
        <div class="settings-tabs">
          <button class="settings-tab active" data-tab="interfaces">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <line x1="3" y1="9" x2="21" y2="9"/>
              <line x1="9" y1="21" x2="9" y2="9"/>
            </svg>
            User Interfaces
          </button>
          <button class="settings-tab" data-tab="common">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09"/>
            </svg>
            Common Settings
          </button>
        </div>
        
        <!-- User Interfaces Tab Content -->
        <div id="interfacesTab">
          <div class="interface-cards">
            <!-- Chatbot -->
            <div class="interface-card enabled" data-interface="chatbot">
              <div class="interface-card-header">
                <div class="interface-card-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                  </svg>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked onchange="toggleInterface('chatbot', this.checked)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <h3>Chatbot</h3>
              <p>AI-powered chatbot for automated patient interaction and support.</p>
              <div class="interface-card-footer">
                <span class="setup-progress complete">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  Fully configured
                </span>
                <a href="chatbot-settings.html" class="btn btn-sm btn-secondary">Configure</a>
              </div>
            </div>
            
            <!-- Patient App -->
            <div class="interface-card enabled" data-interface="patientApp">
              <div class="interface-card-header">
                <div class="interface-card-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/>
                    <line x1="12" y1="18" x2="12.01" y2="18"/>
                  </svg>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked onchange="toggleInterface('patientApp', this.checked)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <h3>Patient App</h3>
              <p>Mobile application for patient self-service and health management.</p>
              <div class="interface-card-footer">
                <span class="setup-progress complete">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  Fully configured
                </span>
                <button class="btn btn-sm btn-secondary" onclick="openSettingsModal('patientApp')">Configure</button>
              </div>
            </div>
            
            <!-- Patient Portal -->
            <div class="interface-card" data-interface="patientPortal">
              <div class="interface-card-header">
                <div class="interface-card-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <circle cx="12" cy="10" r="3"/>
                    <path d="M7 20.662V19a2 2 0 012-2h6a2 2 0 012 2v1.662"/>
                  </svg>
                </div>
                <label class="toggle">
                  <input type="checkbox" onchange="toggleInterface('patientPortal', this.checked)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <h3>Patient Portal</h3>
              <p>Web-based portal for patient access to health records and services.</p>
              <div class="interface-card-footer">
                <span class="setup-progress incomplete">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                  </svg>
                  Not configured
                </span>
                <button class="btn btn-sm btn-secondary" onclick="openSettingsModal('patientPortal')">Configure</button>
              </div>
            </div>
            
            <!-- Forms -->
            <div class="interface-card enabled" data-interface="forms">
              <div class="interface-card-header">
                <div class="interface-card-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                  </svg>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked onchange="toggleInterface('forms', this.checked)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <h3>Forms</h3>
              <p>Digital forms for data collection, surveys, and assessments.</p>
              <div class="interface-card-footer">
                <span class="setup-progress complete">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  Fully configured
                </span>
                <a href="forms-settings.html" class="btn btn-sm btn-secondary">Configure</a>
              </div>
            </div>
            
            <!-- Follow-up -->
            <div class="interface-card enabled" data-interface="followup">
              <div class="interface-card-header">
                <div class="interface-card-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                    <path d="M8 14h.01"/>
                    <path d="M12 14h.01"/>
                    <path d="M16 14h.01"/>
                    <path d="M8 18h.01"/>
                    <path d="M12 18h.01"/>
                  </svg>
                </div>
                <label class="toggle">
                  <input type="checkbox" checked onchange="toggleInterface('followup', this.checked)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <h3>Follow-up</h3>
              <p>Automated follow-up and reminder system for patient engagement.</p>
              <div class="interface-card-footer">
                <span class="setup-progress complete">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  Fully configured
                </span>
                <a href="followup-settings.html" class="btn btn-sm btn-secondary">Configure</a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Common Settings Tab Content -->
        <div id="commonTab" style="display: none;">
          <a href="common-settings.html" style="display: block; text-decoration: none;">
            <div style="background: var(--color-bg-primary); border: 1px solid var(--color-border); border-radius: var(--radius-xl); padding: 2rem; text-align: center;">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary-500)" stroke-width="1.5" style="margin-bottom: 1rem;">
                <circle cx="12" cy="12" r="3"/>
                <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9"/>
              </svg>
              <h3 style="margin-bottom: 0.5rem;">Common Settings Configuration</h3>
              <p style="color: var(--color-text-muted); margin-bottom: 1rem;">Configure clinical, wellness, EHR, and other feature settings</p>
              <span class="btn btn-primary">Open Common Settings</span>
            </div>
          </a>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Settings Modal -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal" style="max-width: 640px;">
      <div class="modal-header">
        <h3 class="modal-title" id="settingsModalTitle">Configure Interface</h3>
        <button class="modal-close" onclick="closeSettingsModal()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body" id="settingsModalBody">
        <!-- Dynamic content will be inserted here -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeSettingsModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveModalSettings()">Save Changes</button>
      </div>
    </div>
  </div>
  
  <script src="js/data.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/sidebar.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initializeLayout({
        currentPage: 'tenant-settings.html',
        breadcrumbs: [
          { name: 'Administration', href: '#' },
          { name: 'Tenants', href: 'tenants.html' },
          { name: 'Settings', href: 'tenant-settings.html' }
        ],
        user: currentUser
      });
      
      // Tab switching
      document.querySelectorAll('.settings-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          const tabId = tab.dataset.tab;
          document.getElementById('interfacesTab').style.display = tabId === 'interfaces' ? 'block' : 'none';
          document.getElementById('commonTab').style.display = tabId === 'common' ? 'block' : 'none';
        });
      });
    });
    
    function toggleInterface(interfaceName, enabled) {
      const card = document.querySelector(`[data-interface="${interfaceName}"]`);
      if (card) {
        card.classList.toggle('enabled', enabled);
        Toast.success(`${interfaceName} ${enabled ? 'enabled' : 'disabled'}`);
      }
    }
    
    function openSettingsModal(interfaceName) {
      const titles = {
        patientApp: 'Patient App Settings',
        patientPortal: 'Patient Portal Settings',
        forms: 'Forms Settings',
        followup: 'Follow-up Settings'
      };
      
      document.getElementById('settingsModalTitle').textContent = titles[interfaceName] || 'Settings';
      
      // Generate modal content based on interface
      let content = '';
      
      if (interfaceName === 'forms') {
        content = `
          <div class="form-group">
            <label class="form-label">Form Submission Email</label>
            <input type="email" class="form-input" placeholder="forms@example.com">
            <p class="form-hint">Email address for form submission notifications</p>
          </div>
          <div class="form-group">
            <label class="form-label">Auto-save Interval (seconds)</label>
            <input type="number" class="form-input" value="30" min="10">
          </div>
          <div class="form-group">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div>
                <div style="font-weight: 500;">Allow Anonymous Submissions</div>
                <p style="font-size: 0.8125rem; color: var(--color-text-muted);">Enable forms to be submitted without login</p>
              </div>
              <label class="toggle">
                <input type="checkbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div>
                <div style="font-weight: 500;">File Uploads</div>
                <p style="font-size: 0.8125rem; color: var(--color-text-muted);">Allow file attachments in forms</p>
              </div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        `;
      } else if (interfaceName === 'followup') {
        content = `
          <div class="form-group">
            <label class="form-label">Default Follow-up Interval (days)</label>
            <input type="number" class="form-input" value="7" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">Maximum Reminders</label>
            <select class="form-input form-select">
              <option value="1">1 reminder</option>
              <option value="2">2 reminders</option>
              <option value="3" selected>3 reminders</option>
              <option value="5">5 reminders</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Notification Channels</label>
            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 0.5rem;">
              <label class="checkbox">
                <input type="checkbox" checked>
                <span class="checkbox-box">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </span>
                <span>SMS</span>
              </label>
              <label class="checkbox">
                <input type="checkbox" checked>
                <span class="checkbox-box">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </span>
                <span>Email</span>
              </label>
              <label class="checkbox">
                <input type="checkbox">
                <span class="checkbox-box">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </span>
                <span>WhatsApp</span>
              </label>
            </div>
          </div>
        `;
      } else {
        content = `
          <div class="form-group">
            <label class="form-label">Display Name</label>
            <input type="text" class="form-input" placeholder="Enter display name">
          </div>
          <div class="form-group">
            <label class="form-label">Description</label>
            <textarea class="form-input" rows="3" placeholder="Brief description"></textarea>
          </div>
          <div class="form-group">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div>
                <div style="font-weight: 500;">Enable Notifications</div>
                <p style="font-size: 0.8125rem; color: var(--color-text-muted);">Send push notifications to users</p>
              </div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        `;
      }
      
      document.getElementById('settingsModalBody').innerHTML = content;
      document.getElementById('settingsModal').classList.add('active');
    }
    
    function closeSettingsModal() {
      document.getElementById('settingsModal').classList.remove('active');
    }
    
    function saveModalSettings() {
      Toast.success('Settings saved successfully');
      closeSettingsModal();
    }
    
    function saveAllSettings() {
      Toast.success('All settings saved successfully');
    }
  </script>
</body>
</html>
