<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>View Assessment Template - REAN Admin Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .detail-table {
      width: 100%;
    }
    
    .detail-table tr {
      border-bottom: 1px solid var(--color-border);
    }
    
    .detail-table tr:last-child {
      border-bottom: none;
    }
    
    .detail-label {
      padding: 1rem 0;
      font-weight: 500;
      color: var(--color-text-muted);
      width: 200px;
      vertical-align: top;
    }
    
    .detail-value {
      padding: 1rem 0;
    }
    
    .tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: rgba(51, 89, 255, 0.1);
      color: var(--color-primary-500);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .tree-node {
      position: relative;
      padding-left: 24px;
      margin-bottom: 0.5rem;
    }
    
    .tree-node::before {
      content: '';
      position: absolute;
      left: 8px;
      top: 0;
      bottom: 50%;
      width: 1px;
      background: var(--color-border);
    }
    
    .tree-node::after {
      content: '';
      position: absolute;
      left: 8px;
      top: 50%;
      width: 12px;
      height: 1px;
      background: var(--color-border);
    }
    
    .tree-node:last-child::before {
      bottom: 50%;
    }
    
    .tree-node-item {
      background: var(--color-surface-alt);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      transition: all 0.2s ease;
    }
    
    .tree-node-item:hover {
      border-color: var(--color-primary-500);
      box-shadow: var(--shadow-sm);
    }
    
    .tree-node-item.question { border-left: 3px solid var(--color-primary-500); }
    .tree-node-item.message { border-left: 3px solid var(--color-success-500); }
    .tree-node-item.list { border-left: 3px solid var(--color-warning-500); }
    
    .node-icon {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .node-icon.question { background: rgba(51, 89, 255, 0.1); color: var(--color-primary-500); }
    .node-icon.message { background: rgba(16, 185, 129, 0.1); color: var(--color-success-500); }
    .node-icon.list { background: rgba(245, 158, 11, 0.1); color: var(--color-warning-500); }
    
    .node-badge {
      padding: 0.125rem 0.5rem;
      border-radius: var(--radius-sm);
      font-size: 0.6875rem;
      font-weight: 500;
    }
    
    .node-badge.question { background: rgba(51, 89, 255, 0.1); color: var(--color-primary-500); }
    .node-badge.message { background: rgba(16, 185, 129, 0.1); color: var(--color-success-500); }
    
    .raw-data-box {
      background: var(--color-surface-alt);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 1rem;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.8125rem;
      max-height: 200px;
      overflow: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar"></aside>
    
    <!-- Main Content -->
    <main class="main-content">
      <!-- Navbar -->
      <header class="navbar" id="navbar"></header>
      
      <!-- Page Content -->
      <div class="page-container">
        <div class="card">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h2 class="card-title" style="margin: 0;">View Assessment Template</h2>
            <a href="assessment-templates.html" class="btn btn-icon btn-ghost" style="color: var(--color-error-500);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </a>
          </div>
          
          <div class="card-body">
            <table class="detail-table">
              <tbody>
                <tr>
                  <td class="detail-label">Title</td>
                  <td class="detail-value">Patient Health Questionnaire (PHQ-9)</td>
                </tr>
                <tr>
                  <td class="detail-label">Description</td>
                  <td class="detail-value">A multipurpose instrument for screening, diagnosing, monitoring and measuring the severity of depression. The PHQ-9 incorporates DSM-IV depression diagnostic criteria with other leading major depressive symptoms.</td>
                </tr>
                <tr>
                  <td class="detail-label">Display Code</td>
                  <td class="detail-value"><code style="background: var(--color-surface-alt); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">PHQ-9-001</code></td>
                </tr>
                <tr>
                  <td class="detail-label">Type</td>
                  <td class="detail-value">
                    <span style="display: inline-flex; align-items: center; gap: 0.375rem; padding: 0.25rem 0.75rem; background: rgba(51, 89, 255, 0.1); color: var(--color-primary-500); border-radius: var(--radius-full); font-size: 0.875rem; font-weight: 500;">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                      </svg>
                      Clinical
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="detail-label">Provider</td>
                  <td class="detail-value">Pfizer Inc.</td>
                </tr>
                <tr>
                  <td class="detail-label">Provider Assessment Code</td>
                  <td class="detail-value"><code style="background: var(--color-surface-alt); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">PFIZER-PHQ9-2024</code></td>
                </tr>
                <tr>
                  <td class="detail-label">Serve List Node Children At Once</td>
                  <td class="detail-value">
                    <span style="display: inline-flex; align-items: center; gap: 0.25rem; color: var(--color-success-500);">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                      </svg>
                      Yes
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="detail-label">Scoring Applicable</td>
                  <td class="detail-value">
                    <span style="display: inline-flex; align-items: center; gap: 0.25rem; color: var(--color-success-500);">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                      </svg>
                      Yes
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="detail-label">Tags</td>
                  <td class="detail-value">
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                      <span class="tag">depression</span>
                      <span class="tag">mental-health</span>
                      <span class="tag">screening</span>
                      <span class="tag">PHQ</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="detail-label">Raw Data</td>
                  <td class="detail-value">
                    <div class="raw-data-box">{
  "version": "2.0",
  "scoringRanges": [
    {"min": 0, "max": 4, "severity": "Minimal"},
    {"min": 5, "max": 9, "severity": "Mild"},
    {"min": 10, "max": 14, "severity": "Moderate"},
    {"min": 15, "max": 19, "severity": "Moderately Severe"},
    {"min": 20, "max": 27, "severity": "Severe"}
  ]
}</div>
                  </td>
                </tr>
                <tr>
                  <td class="detail-label">Assessment Nodes</td>
                  <td class="detail-value">
                    <!-- Node Tree View -->
                    <div>
                      <!-- Root Node -->
                      <div class="tree-node-item list" style="margin-bottom: 0.75rem;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                          <div style="display: flex; align-items: center; gap: 0.75rem;">
                            <div class="node-icon list">
                              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                              </svg>
                            </div>
                            <div>
                              <div style="font-weight: 500; font-size: 0.875rem;">Assessment Root Node</div>
                              <div style="font-size: 0.75rem; color: var(--color-text-muted);">Node List - 9 children</div>
                            </div>
                          </div>
                          <span style="font-size: 0.6875rem; color: var(--color-text-muted);">ROOT</span>
                        </div>
                      </div>
                      
                      <!-- Child Nodes -->
                      <div style="margin-left: 1.5rem;">
                        <div class="tree-node">
                          <div class="tree-node-item question">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                              <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div class="node-icon question">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                  </svg>
                                </div>
                                <div>
                                  <div style="font-weight: 500; font-size: 0.875rem;">Little interest or pleasure in doing things?</div>
                                  <div style="font-size: 0.75rem; color: var(--color-text-muted);">Question - Single Choice Selection</div>
                                </div>
                              </div>
                              <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span class="node-badge question">Q1</span>
                                <a href="assessment-node-view.html" class="btn btn-icon btn-ghost sm">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                  </svg>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="tree-node">
                          <div class="tree-node-item question">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                              <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div class="node-icon question">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                  </svg>
                                </div>
                                <div>
                                  <div style="font-weight: 500; font-size: 0.875rem;">Feeling down, depressed, or hopeless?</div>
                                  <div style="font-size: 0.75rem; color: var(--color-text-muted);">Question - Single Choice Selection</div>
                                </div>
                              </div>
                              <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span class="node-badge question">Q2</span>
                                <a href="assessment-node-view.html" class="btn btn-icon btn-ghost sm">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                  </svg>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="tree-node">
                          <div class="tree-node-item question">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                              <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div class="node-icon question">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                  </svg>
                                </div>
                                <div>
                                  <div style="font-weight: 500; font-size: 0.875rem;">Trouble falling or staying asleep?</div>
                                  <div style="font-size: 0.75rem; color: var(--color-text-muted);">Question - Single Choice Selection</div>
                                </div>
                              </div>
                              <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span class="node-badge question">Q3</span>
                                <a href="assessment-node-view.html" class="btn btn-icon btn-ghost sm">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                  </svg>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="tree-node">
                          <div class="tree-node-item message">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                              <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div class="node-icon message">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                                  </svg>
                                </div>
                                <div>
                                  <div style="font-weight: 500; font-size: 0.875rem;">Thank you for completing the assessment</div>
                                  <div style="font-size: 0.75rem; color: var(--color-text-muted);">Message</div>
                                </div>
                              </div>
                              <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span class="node-badge message">MSG</span>
                                <a href="assessment-node-view.html" class="btn btn-icon btn-ghost sm">
                                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                  </svg>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <!-- More nodes indicator -->
                        <div style="text-align: center; padding: 0.5rem 0;">
                          <span style="font-size: 0.75rem; color: var(--color-text-muted);">+ 5 more nodes</span>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            
            <!-- Action Buttons -->
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem; padding-top: 1.5rem; margin-top: 1.5rem; border-top: 1px solid var(--color-border);">
              <a href="assessment-nodes.html" class="btn btn-primary">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                Add Node
              </a>
              <button class="btn btn-secondary" onclick="handleExport()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                  <polyline points="7 10 12 15 17 10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Export
              </button>
              <button class="btn btn-secondary" onclick="handleFlowJson()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="16 18 22 12 16 6"/>
                  <polyline points="8 6 2 12 8 18"/>
                </svg>
                Flow JSON
              </button>
              <button class="btn btn-primary">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
                Edit
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <script src="js/data.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/sidebar.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initializeLayout({
        currentPage: 'assessment-template-view.html',
        breadcrumbs: [
          { name: 'Clinical', href: '#' },
          { name: 'Assessment Templates', href: 'assessment-templates.html' },
          { name: 'View', href: '#' }
        ],
        user: currentUser
      });
    });
    
    function handleExport() {
      Toast.success('Template exported successfully');
    }
    
    function handleFlowJson() {
      Toast.success('Flow JSON exported successfully');
    }
  </script>
</body>
</html>
